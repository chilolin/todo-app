(this["webpackJsonptodo-application"]=this["webpackJsonptodo-application"]||[]).push([[0],{105:function(e,t,n){"use strict";n.r(t);var a=n(4),r=n(0),i=n.n(r),c=n(14),o=n.n(c),s=n(24),d=n(52),u=n(60),l=n(10),b=Object(d.b)({name:"todo",initialState:{todoList:{},doneList:{}},reducers:{fetchTodoList:function(e,t){e.todoList=t.payload},fetchDoneList:function(e,t){e.doneList=t.payload},taskCreated:function(e,t){var n=t.payload.id,a=new Date;e.todoList[n]=Object(l.a)(Object(l.a)({},t.payload),{},{id:n,createdAt:a})},taskDone:function(e,t){var n=t.payload,a=e.todoList[n];a&&(e.doneList[n]=Object(l.a)({},a),delete e.todoList[n])},taskTodo:function(e,t){var n=t.payload,a=e.doneList[n];a&&(e.todoList[n]=Object(l.a)({},a),delete e.doneList[n])},taskUpdated:function(e,t){var n=t.payload,a=n.id,r=Object(u.a)(n,["id"]),i=e.todoList[a];i&&(e.todoList[a]=Object(l.a)(Object(l.a)({},i),r))},taskDeleted:function(e,t){var n=t.payload;e.todoList[n]&&delete e.todoList[n]}}}),j=n(18),p=n(19);function f(){var e=Object(j.a)(["\n  body {\n    font-family: 'Roboto', sans-serif;\n  }\n\n  a {\n    color: black;\n    text-decoration: none;\n  }\n\n  * {\n    box-sizing: border-box;\n  }\n"]);return f=function(){return e},e}var v=Object(p.a)(f()),O=n(44),h=n(11),x=n.n(h),k=n(17),m=n(26),g=n(53),L=(n(108),n(107),{apiKey:"AIzaSyDw2iUC8qVSIz4pYg5hQrTMlunSLkz3OEo",authDomain:"yamaoka-todo-develop.firebaseapp.com",projectId:"yamaoka-todo-develop",storageBucket:"yamaoka-todo-develop.appspot.com",messagingSenderId:"144460115769",appId:"1:144460115769:web:700a4e0823de1eea0342e8",measurementId:"G-WX24QV0KN0"});g.a.initializeApp(L),g.a.analytics();var w=g.a.firestore(),y=(g.a,{getTaskList:function(){var e=Object(k.a)(x.a.mark((function e(t){var n,a;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.collection(t).get();case 2:return n=e.sent,a=n.docs.map((function(e){return e.data()})).reduce((function(e,t){return e[t.id]=t,e}),{}),e.abrupt("return",a);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),taskCreated:function(){var e=Object(k.a)(x.a.mark((function e(t){var n,a,r,i,c;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=w.collection("todoList"),a=n.doc(),r=a.id,i=n.doc(r),e.next=5,i.get();case 5:if(e.sent.exists){e.next=10;break}return c=new Date,e.next=10,i.set(Object(l.a)(Object(l.a)({},t),{},{id:r,createdAt:c}));case 10:return e.abrupt("return",r);case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),taskDone:function(){var e=Object(k.a)(x.a.mark((function e(t){var n,a,r,i,c;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=w.collection("todoList").doc(t),a=w.collection("doneList").doc(t),e.next=4,n.get();case 4:return r=e.sent,e.next=7,a.get();case 7:if(i=e.sent,!r.exists||i.exists){e.next=14;break}return c=r.data(),e.next=12,a.set(Object(l.a)({},c));case 12:return e.next=14,n.delete();case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),taskTodo:function(){var e=Object(k.a)(x.a.mark((function e(t){var n,a,r,i,c;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=w.collection("todoList").doc(t),a=w.collection("doneList").doc(t),e.next=4,n.get();case 4:return r=e.sent,e.next=7,a.get();case 7:if(i=e.sent,r.exists||!i.exists){e.next=14;break}return c=i.data(),e.next=12,n.set(Object(l.a)({},c));case 12:return e.next=14,a.delete();case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),taskUpdated:function(){var e=Object(k.a)(x.a.mark((function e(t){var n,a,r,i;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.id,a=t.title,r=t.deadline,i=w.collection("todoList").doc(n),e.next=4,i.get();case 4:if(!e.sent.exists){e.next=8;break}return e.next=8,i.update({title:a,deadline:r});case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),taskDeleted:function(){var e=Object(k.a)(x.a.mark((function e(t){var n;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=w.collection("todoList").doc(t),e.next=3,n.get();case 3:if(!e.sent.exists){e.next=7;break}return e.next=7,n.delete();case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}),C=n(154),D=n(143),T=n(157),S=n(148),I=n(146),E=Object(D.a)((function(e){return Object(T.a)({wrapper:{margin:e.spacing(1),position:"relative"},buttonProgress:{position:"absolute",top:"50%",left:"50%",marginTop:-12,marginLeft:-12}})})),F=function(e){var t=e.children,n=void 0===t?"":t,r=e.isLoading,i=void 0!==r&&r,c=Object(u.a)(e,["children","isLoading"]),o=E();return Object(a.jsxs)("div",{className:o.wrapper,children:[Object(a.jsx)(I.a,Object(l.a)(Object(l.a)({disabled:i},c),{},{children:n})),i&&Object(a.jsx)(S.a,{size:24,className:o.buttonProgress})]})};function z(){var e=Object(j.a)(["\n  display: flex;\n  justify-content: flex-end;\n  width: 370px;\n\n  @media screen and (max-width: 800px) {\n    width: 250px;\n  }\n"]);return z=function(){return e},e}function P(){var e=Object(j.a)(["\n  display: flex;\n  justify-content: space-between;\n  width: 370px;\n\n  @media screen and (max-width: 800px) {\n    display: grid;\n    grid-template-columns: 1fr;\n    grid-gap: 10px;\n    width: 250px;\n  }\n"]);return P=function(){return e},e}function U(){var e=Object(j.a)(["\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  margin-top: 30px;\n"]);return U=function(){return e},e}var A=p.b.form(U()),N=p.b.div(P()),q=p.b.div(z()),B=function(e){var t=e.isLoading,n=void 0!==t&&t,r=e.title,i=void 0===r?"":r,c=e.deadline,o=void 0===c?void 0:c,s=e.handleTaskCreatedSubmit,d=void 0===s?function(){}:s,u=e.handleChange,l=void 0===u?function(){}:u;return Object(a.jsxs)(A,{onSubmit:d,children:[Object(a.jsxs)(N,{children:[Object(a.jsx)(C.a,{id:"create-title",label:"\u3084\u308b\u4e8b",value:i,onChange:l,name:"title",InputLabelProps:{shrink:!0},disabled:n,required:!0}),Object(a.jsx)(C.a,{id:"create-date",label:"\u671f\u65e5",type:"date",value:o,onChange:l,name:"deadline",InputLabelProps:{shrink:!0},disabled:n})]}),Object(a.jsx)(q,{children:Object(a.jsx)(F,{isLoading:n,type:"submit",color:"primary",children:"\u8ffd\u52a0\u3059\u308b"})})]})},J=function(){var e=Object(r.useState)(!1),t=Object(m.a)(e,2),n=t[0],i=t[1],c=Object(r.useState)({title:"",deadline:""}),o=Object(m.a)(c,2),d=o[0],u=o[1],j=Object(s.b)(),p=b.actions.taskCreated,f=d.title,v=d.deadline,h=function(){var e=Object(k.a)(x.a.mark((function e(t){var n;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),i(!0),e.prev=2,e.next=5,y.taskCreated(d);case 5:n=e.sent,j(p(Object(l.a)({id:n},d))),u({title:"",deadline:""}),e.next=13;break;case 10:throw e.prev=10,e.t0=e.catch(2),new Error("error create task");case 13:return e.prev=13,i(!1),e.finish(13);case 16:case"end":return e.stop()}}),e,null,[[2,10,13,16]])})));return function(t){return e.apply(this,arguments)}}();return Object(a.jsx)(B,Object(l.a)({},{isLoading:n,title:f,deadline:v,handleTaskCreatedSubmit:h,handleChange:function(e){e.preventDefault();var t=e.target,n=t.name,a=t.value;u(Object(l.a)(Object(l.a)({},d),{},Object(O.a)({},n,a)))}}))},K=function(){var e=Object(r.useState)(!1),t=Object(m.a)(e,2),n=t[0],a=t[1],i=Object(s.c)((function(e){return e.doneList})),c=Object(s.c)((function(e){return e.todoList})),o=Object(s.b)();return Object(r.useEffect)((function(){var e=!1,t=b.actions,n=t.fetchDoneList,r=t.fetchTodoList;return function(){var t=Object(k.a)(x.a.mark((function t(){var i,c;return x.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a(!0),t.prev=1,t.next=4,y.getTaskList("doneList");case 4:return i=t.sent,t.next=7,y.getTaskList("todoList");case 7:c=t.sent,e||(o(n(i)),o(r(c))),t.next=14;break;case 11:throw t.prev=11,t.t0=t.catch(1),new Error(t.t0);case 14:return t.prev=14,a(!1),t.finish(14);case 17:case"end":return t.stop()}}),t,null,[[1,11,14,17]])})));return function(){return t.apply(this,arguments)}}()(),function(){e=!0}}),[o]),{isLoading:n,doneList:i,todoList:c}},M=n(153),Q=n(80),V=n.n(Q),G=n(79),R=n.n(G),W=n(150),X=n(156),Y=n(152),H=n(151),Z=n(158),$=n(78),_=n.n($),ee=function(e){var t=e.isLoading,n=void 0!==t&&t,r=e.isOpen,i=void 0!==r&&r,c=e.title,o=void 0===c?"":c,s=e.deadline,d=void 0===s?void 0:s,u=e.handleOpen,l=void 0===u?function(){}:u,b=e.handleClose,j=void 0===b?function(){}:b,p=e.handleTaskUpdatedClick,f=void 0===p?function(){}:p,v=e.handleTaskDeletedClick,O=void 0===v?function(){}:v,h=e.handleChange,x=void 0===h?function(){}:h;return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(W.a,{size:"medium",color:"secondary","aria-label":"edit",onClick:l,children:Object(a.jsx)(_.a,{})}),Object(a.jsxs)(X.a,{open:i,onClose:j,"aria-labelledby":"form-dialog-title",children:[Object(a.jsx)(Z.a,{id:"form-dialog-title",children:"\u7de8\u96c6"}),Object(a.jsxs)(H.a,{children:[Object(a.jsx)(C.a,{autoFocus:!0,id:"edit-title",label:"\u3084\u308b\u4e8b",value:o,onChange:x,name:"title",InputLabelProps:{shrink:!0},disabled:n,required:!0}),Object(a.jsx)(C.a,{id:"edit-date",label:"\u671f\u65e5",type:"date",value:d,onChange:x,name:"deadline",InputLabelProps:{shrink:!0},disabled:n})]}),Object(a.jsxs)(Y.a,{children:[Object(a.jsx)(F,{isLoading:n,onClick:f,color:"primary",children:"\u66f4\u65b0\u3059\u308b"}),Object(a.jsx)(F,{isLoading:n,onClick:O,color:"secondary",children:"\u524a\u9664\u3059\u308b"})]})]})]})},te=function(e){var t,n,i=e.id,c=void 0===i?"":i,o=Object(r.useState)(!1),d=Object(m.a)(o,2),u=d[0],j=d[1],p=Object(r.useState)(!1),f=Object(m.a)(p,2),v=f[0],h=f[1],g=Object(r.useState)(!1),L=Object(m.a)(g,2),w=L[0],C=L[1],D=Object(s.c)((function(e){return e.todoList})),T=Object(s.b)(),S=Object(r.useState)({title:null===(t=D[c])||void 0===t?void 0:t.title,deadline:null===(n=D[c])||void 0===n?void 0:n.deadline}),I=Object(m.a)(S,2),E=I[0],F=I[1];Object(r.useEffect)((function(){return j(!1),function(){j(!0)}}),[]);var z=b.actions,P=z.taskUpdated,U=z.taskDeleted,A=E.title,N=E.deadline,q=function(){var e=Object(k.a)(x.a.mark((function e(t){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),h(!0),e.prev=2,e.next=5,y.taskUpdated(Object(l.a)({id:c},E));case 5:u||T(P(Object(l.a)({id:c},E))),e.next=11;break;case 8:throw e.prev=8,e.t0=e.catch(2),new Error("error update task");case 11:return e.prev=11,h(!1),C(!1),e.finish(11);case 15:case"end":return e.stop()}}),e,null,[[2,8,11,15]])})));return function(t){return e.apply(this,arguments)}}(),B=function(){var e=Object(k.a)(x.a.mark((function e(t){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),h(!0),e.prev=2,e.next=5,y.taskDeleted(c);case 5:u||T(U(c)),e.next=11;break;case 8:throw e.prev=8,e.t0=e.catch(2),new Error("error delete task");case 11:return e.prev=11,h(!1),C(!1),e.finish(11);case 15:case"end":return e.stop()}}),e,null,[[2,8,11,15]])})));return function(t){return e.apply(this,arguments)}}();return Object(a.jsx)(ee,Object(l.a)({},{isLoading:v,isOpen:w,title:A,deadline:N,handleOpen:function(){return C(!0)},handleClose:function(){return C(!1)},handleTaskUpdatedClick:q,handleTaskDeletedClick:B,handleChange:function(e){e.preventDefault();var t=e.target,n=t.name,a=t.value;F(Object(l.a)(Object(l.a)({},E),{},Object(O.a)({},n,a)))}}))};function ne(){var e=Object(j.a)(["\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n"]);return ne=function(){return e},e}function ae(){var e=Object(j.a)(["\n  padding-bottom: 8px;\n  margin: 0 15px 5px 15px;\n  border-bottom: 1px solid lightgray;\n"]);return ae=function(){return e},e}var re=p.b.li(ae()),ie=p.b.div(ne()),ce=function(e){var t=e.isLoading,n=void 0!==t&&t,r=e.id,i=void 0===r?"":r,c=e.title,o=void 0===c?"":c,s=e.deadline,d=void 0===s?void 0:s,u=e.isDone,l=void 0!==u&&u,b=e.handleTaskDoneClick,j=void 0===b?function(){}:b,p=e.handleTaskTodoClick,f=void 0===p?function(){}:p;return Object(a.jsx)(a.Fragment,{children:n?Object(a.jsx)(M.a,{}):Object(a.jsxs)(re,{children:[Object(a.jsxs)("p",{children:["\u3084\u308b\u4e8b\uff1a",o]}),Object(a.jsxs)("p",{children:["\u671f\u65e5\uff1a",d]}),l?Object(a.jsx)(I.a,{variant:"contained",color:"primary",startIcon:Object(a.jsx)(R.a,{}),onClick:f,children:"TODO"}):Object(a.jsxs)(ie,{children:[Object(a.jsx)(te,{id:i}),Object(a.jsx)(I.a,{variant:"contained",color:"primary",endIcon:Object(a.jsx)(V.a,{}),onClick:j,children:"DONE"})]})]})})},oe=function(e){var t=e.id,n=void 0===t?"":t,i=e.title,c=void 0===i?"":i,o=e.deadline,d=void 0===o?void 0:o,u=e.isDone,j=void 0!==u&&u,p=Object(r.useState)(!1),f=Object(m.a)(p,2),v=f[0],O=f[1],h=Object(r.useState)(!1),g=Object(m.a)(h,2),L=g[0],w=g[1],C=Object(s.b)();Object(r.useEffect)((function(){return O(!1),function(){O(!0)}}),[]);var D=b.actions,T=D.taskDone,S=D.taskTodo,I=function(){var e=Object(k.a)(x.a.mark((function e(t){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),w(!0),e.prev=2,e.next=5,y.taskDone(n);case 5:v||C(T(n)),e.next=11;break;case 8:throw e.prev=8,e.t0=e.catch(2),new Error("error task done");case 11:return e.prev=11,w(!1),e.finish(11);case 14:case"end":return e.stop()}}),e,null,[[2,8,11,14]])})));return function(t){return e.apply(this,arguments)}}(),E=function(){var e=Object(k.a)(x.a.mark((function e(t){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),w(!0),e.prev=2,e.next=5,y.taskTodo(n);case 5:v||C(S(n)),e.next=11;break;case 8:throw e.prev=8,e.t0=e.catch(2),new Error("error task todo");case 11:return e.prev=11,w(!1),e.finish(11);case 14:case"end":return e.stop()}}),e,null,[[2,8,11,14]])})));return function(t){return e.apply(this,arguments)}}();return Object(a.jsx)(ce,Object(l.a)({},{isLoading:L,id:n,title:c,deadline:d,isDone:j,handleTaskDoneClick:I,handleTaskTodoClick:E}))};function se(){var e=Object(j.a)(["\n  display: flex;\n  flex-direction: column;\n  align-content: center;\n  width: 100%;\n  height: 100%;\n  padding-left: 0;\n  overflow-y: scroll;\n  list-style: none;\n"]);return se=function(){return e},e}function de(){var e=Object(j.a)(["\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  width: 80%;\n  height: 450px;\n"]);return de=function(){return e},e}function ue(){var e=Object(j.a)(["\n  display: grid;\n  grid-template-columns: 1fr 1fr;\n  justify-items: center;\n\n  @media screen and (max-width: 800px) {\n    grid-template-columns: 1fr;\n  }\n"]);return ue=function(){return e},e}function le(){var e=Object(j.a)(["\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  width: 100%;\n  height: 70vh;\n"]);return le=function(){return e},e}var be=p.b.div(le()),je=p.b.div(ue()),pe=p.b.div(de()),fe=p.b.ul(se()),ve=function(e){var t=e.isLoading,n=void 0!==t&&t,r=e.todoList,i=void 0===r?{}:r,c=e.doneList,o=void 0===c?{}:c;return Object(a.jsx)(a.Fragment,{children:n?Object(a.jsx)(be,{children:Object(a.jsx)(S.a,{})}):Object(a.jsxs)(je,{children:[Object(a.jsxs)(pe,{children:[Object(a.jsx)("h2",{children:"Todo\u30ea\u30b9\u30c8"}),Object(a.jsx)(fe,{children:Object.values(i).map((function(e){var t=e.id,n=void 0===t?"":t,r=e.title,i=void 0===r?"":r,c=e.deadline,o=void 0===c?void 0:c;return Object(a.jsx)(oe,Object(l.a)({},{id:n,title:i,deadline:o}),n)}))})]}),Object(a.jsxs)(pe,{children:[Object(a.jsx)("h2",{children:"Done\u30ea\u30b9\u30c8"}),Object(a.jsx)(fe,{children:Object.values(o).map((function(e){var t=e.id,n=void 0===t?"":t,r=e.title,i=void 0===r?"":r,c=e.deadline,o=void 0===c?void 0:c;return Object(a.jsx)(oe,Object(l.a)(Object(l.a)({},{id:n,title:i,deadline:o}),{},{isDone:!0}),n)}))})]})]})})},Oe=function(){var e=K(),t=e.isLoading,n=e.doneList,r=e.todoList;return Object(a.jsx)(ve,Object(l.a)({},{isLoading:t,doneList:n,todoList:r}))};function he(){var e=Object(j.a)(["\n  width: 100%;\n"]);return he=function(){return e},e}var xe=p.b.div(he()),ke=function(){return Object(a.jsxs)(xe,{children:[Object(a.jsx)(J,{}),Object(a.jsx)(Oe,{})]})},me=function(){return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(v,{}),Object(a.jsx)(ke,{})]})},ge=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,160)).then((function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,i=t.getLCP,c=t.getTTFB;n(e),a(e),r(e),i(e),c(e)}))},Le=Object(d.c)({serializableCheck:!1}),we=Object(d.a)({reducer:b.reducer,middleware:Le});o.a.render(Object(a.jsx)(s.a,{store:we,children:Object(a.jsx)(i.a.StrictMode,{children:Object(a.jsx)(me,{})})}),document.getElementById("root")),ge()}},[[105,1,2]]]);
//# sourceMappingURL=main.dc16385d.chunk.js.map